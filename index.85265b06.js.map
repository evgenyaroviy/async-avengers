{"mappings":"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","sources":["src/index.js","src/js/pages/home/monthly_trends.js","src/js/pages/home/weekly_trends.js"],"sourcesContent":["import './js/pages/header';\nimport './js/pages/hero';\nimport './js/pages/home/monthly_trends';\nimport './js/pages/home/weekly_trends';\nimport './js/galleryMarkup';\nimport './js/request';\nimport './js/components/modal';\nimport './js/pages/footer';\nimport './js/components/scrollUp';\nimport './js/components/loader';\nimport './js/components/team';","import axios from 'axios';\nimport { optionsUpcoming } from '../../request';\nimport { optionsGenre } from '../../request';\nimport { toggleLoader } from '../../components/loader';\nimport {\n  removeFromLocalStorage,\n  addToLocalStorage,\n  moviesIdList,\n  MOVIES_LIST_KEY,\n} from '../../components/localStorageBtn';\n\nconst containerMovie = document.querySelector('.container-upcoming-movie');\n\nasync function responseUpcoming() {\n  try {\n    toggleLoader(true);\n\n    const movieInfo = (await fetchUpcomingMovie()).results;\n    const randomFilm = createRandomMovies(movieInfo);\n    const genres = await fetchGenresMovie(randomFilm.id);\n\n    if (genres.length === 0) {\n      containerMovie.innerHTML = createMarkupUpcoming(randomFilm, []);\n    } else {\n      generateGenres(movieInfo, genres);\n      containerMovie.innerHTML = createMarkupUpcoming(randomFilm, genres);\n    }\n    const idFind = moviesIdList.find(e => e.id === randomFilm.id);\n    const addToLibraryBtn = document.querySelector('.upcoming-btn-add');\n    const removeFromLibraryBtn = document.querySelector('.upcoming-btn-remove');\n\n    if (idFind) {\n      addToLibraryBtn.style.display = 'none';\n      removeFromLibraryBtn.style.display = 'block';\n    } else {\n      removeFromLibraryBtn.style.display = 'none';\n      addToLibraryBtn.style.display = 'block';\n    }\n\n    containerMovie.addEventListener('click', onClickAddToLocalStorage);\n\n    function onClickAddToLocalStorage(event) {\n      event.preventDefault();\n      let randomFilmToLibrary = [];\n      randomFilmToLibrary.push(randomFilm);\n\n      randomFilmToLibrary.forEach(e => {\n        const genre = genres.find(genre => genre.id == e.genre_ids[0]);\n        return (e.genre_name = genre ? genre.name : '');\n      });\n\n      const target = event.target;\n      if (target.classList.contains('upcoming-btn-add-span')) {\n        addToLocalStorage(event, randomFilmToLibrary);\n      } else if (target.classList.contains('upcoming-btn-remove-span')) {\n        removeFromLocalStorage(event, randomFilmToLibrary);\n      }\n    }\n    //local\n  } catch (error) {\n    console.log(error);\n    markupError();\n  } finally {\n    toggleLoader(false);\n  }\n}\n\nasync function fetchUpcomingMovie() {\n  try {\n    toggleLoader(true);\n    return (await axios.request(optionsUpcoming)).data;\n  } catch (error) {\n    console.error(error);\n    containerMovie.innerHTML = markupError();\n  } finally {\n    toggleLoader(false);\n  }\n}\nasync function fetchGenresMovie(id) {\n  try {\n    const genres = await axios.request(optionsGenre);\n    return genres.data.genres;\n  } catch (error) {\n    console.log(error);\n    return [];\n  }\n}\n\nfunction createRandomMovies(movieInfo) {\n  const currentDate = new Date();\n  const year = currentDate.getFullYear();\n  const month = String(currentDate.getMonth() + 1).padStart(2, '0');\n  const startOfMonth = `${year}-${month}-01`;\n  const endOfMonth = `${year}-${month}-31`;\n\n  const filteredMovies = movieInfo.filter(\n    movie =>\n      movie.release_date >= startOfMonth && movie.release_date <= endOfMonth\n  );\n  const randomMovieFilm =\n    filteredMovies[Math.floor(Math.random() * filteredMovies.length)];\n\n  return randomMovieFilm;\n}\n\nfunction generateGenres(movieInfo, genres) {\n  return movieInfo.map(movie => {\n    const genreNames = movie.genre_ids.map(genreId => {\n      const genre = genres.find(genre => genre.id === genreId);\n      return genre ? genre.name : '';\n    });\n    return genreNames.join(', ');\n  });\n}\n\nfunction generateReleaseDate(date) {\n  const releaseDay = addLeadingZero(new Date(date).getDate());\n  const releaseMonth = addLeadingZero(new Date(date).getMonth() + 1);\n  const releaseYear = new Date(date).getFullYear();\n  return `${releaseDay}.${releaseMonth}.${releaseYear}`;\n}\n\nfunction createMarkupUpcoming(movieInfo, genres) {\n  const {\n    id: idMovie,\n    backdrop_path,\n    poster_path,\n    original_title,\n    release_date,\n    vote_average,\n    vote_count,\n    popularity,\n    genre_ids,\n    overview,\n  } = movieInfo;\n\n  const releaseDate = generateReleaseDate(release_date);\n\n  let poster = null;\n  const screenWidth = window.innerWidth;\n  if (screenWidth <= 767 && poster_path) {\n    poster = `https://image.tmdb.org/t/p/original/${poster_path}`;\n  } else if (backdrop_path) {\n    poster = `https://image.tmdb.org/t/p/original/${backdrop_path}`;\n  } else {\n    poster = `https://astoriamuseums.org/wp-content/uploads/2020/10/OFM-poster-not-available.png`;\n  }\n\n  const roundedPopularity = popularity.toFixed(1);\n\n  const genreNames = genre_ids.map(genreId => {\n    const genre = genres.find(genre => genre.id === genreId);\n    return genre ? genre.name : '';\n  });\n\n  return `\n    <img width=\"280\" height=\"402\" class=\"upcoming-image\" loading=\"lazy\" src=\"${poster}\" alt=\"${original_title}\">\n    <div class=\"info-container\" >\n    <h3 class=\"upcoming-movie-title\">${original_title}</h3>\n    <ul class=\"upcoming-list-details list\">\n      <li class=\"upcoming-list-details-item\">\n        <p class=\"upcoming-list-details-subtitle\">Release date</p>\n        <p class=\"upcoming-realese-date\">${releaseDate}</p>\n      </li>\n      <li class=\"upcoming-list-details-item\">\n        <p class=\"upcoming-list-details-subtitle\">Vote / Votes</p>\n        <p class=\"upcoming-votes\"><span>${vote_average}</span> / <span>${vote_count}</span></p>\n      </li>\n      <li class=\"upcoming-list-details-item\">\n        <p class=\"upcoming-list-details-subtitle\">Popularity</p>\n        <p class=\"upcoming-popularity\">${roundedPopularity}</p>\n      </li>\n      <li class=\"upcoming-list-details-item\">\n        <p class=\"upcoming-list-details-subtitle\">Genre</p>\n        <p class=\"genre\">${genreNames.join(', ')}</p>\n      </li>\n    </ul>\n    <h4 class=\"upcoming-about\">ABOUT</h4>\n    <p class=\"upcoming-about-text\">${overview}</p>\n    <button class=\"btn upcoming-btn-add btn-accent\" data-id=\"${idMovie}\" type=\"button\">\n    <span class=\"btn-in upcoming-btn-add-span\" >Add to my library</span></button>\n    <button class=\"btn upcoming-btn-remove btn-dark\" data-id=\"${idMovie}\" hidden  type=\"button\">\n    <span class=\"btn-in upcoming-btn-remove-span\"  >Remove from my library</span></button>\n    </div>\n  `;\n}\n\nfunction markupError() {\n  console.log('hello');\n  return `      \n<h2 class=\"upcoming-error\">\nOOPS...<br>\nWe are very sorry!<br>\nSomething went wrong.</h2>`;\n}\n\nfunction addLeadingZero(value) {\n  return String(value).padStart(2, '0');\n}\n\nresponseUpcoming();\n","import axios from 'axios';\nimport { galleryMarkup } from '../../galleryMarkup';\nimport { optionsGenre, optionsWeek } from '../../request';\n\nconst CARD_BLOCK = document.querySelector('.movies-container');\nconst getResponce = async () => {\n  try {\n    const res = axios.request(optionsWeek);\n    return res.then(res => {\n      if (window.screen.width <= 768) {\n        createMarkup(res.data.results.slice(0, 1));\n        getGenres(res.data.results.slice(0, 1));\n      } else {\n        createMarkup(res.data.results.slice(0, 3));\n        // generateGenres(res.data.results.slice(0, 1), getGenres);\n      }\n    });\n  } catch (error) {\n    console.log(error);\n  }\n};\ngetResponce();\nasync function createMarkup(data) {\n  const genres = await fetchGenresMovie();\n  data.forEach(e => {\n    const genre = genres.find(genre => genre.id == e.genre_ids[0]);\n    e.genre_name = genre ? genre.name : '';\n  });\n  CARD_BLOCK.innerHTML = galleryMarkup(data);\n}\n\nasync function fetchGenresMovie() {\n  try {\n    const response = await axios.request(optionsGenre);\n    return response.data.genres;\n  } catch (error) {\n    console.log(error);\n  }\n}\n"],"names":["parcelRequire","$bpxeT","$080adeebae6155d9$var$containerMovie","document","querySelector","$080adeebae6155d9$var$_responseUpcoming","$parcel$interopDefault","$2TvXO","mark","_callee","movieInfo","randomFilm","genres","idFind","addToLibraryBtn","removeFromLibraryBtn","onClickAddToLocalStorage","event","preventDefault","randomFilmToLibrary","push","forEach","e","genre1","find","genre","id","genre_ids","genre_name","name","target","classList","contains","$bNU16","addToLocalStorage","removeFromLocalStorage","$iPy5Q","toggleLoader","$080adeebae6155d9$var$fetchUpcomingMovie","_ctx","sent","results","$080adeebae6155d9$var$createRandomMovies","$080adeebae6155d9$var$fetchGenresMovie","length","innerHTML","$080adeebae6155d9$var$createMarkupUpcoming","$080adeebae6155d9$var$generateGenres","moviesIdList","style","display","addEventListener","console","log","t0","$080adeebae6155d9$var$markupError","apply","this","arguments","$080adeebae6155d9$var$_fetchUpcomingMovie","$dIxxU","default","request","$944jd","optionsUpcoming","data","error","$080adeebae6155d9$var$_fetchGenresMovie","optionsGenre","currentDate","Date","year","getFullYear","month","String","getMonth","padStart","startOfMonth","concat","endOfMonth","filteredMovies","filter","movie","release_date","Math","floor","random","map","genreId","genre2","join","date","releaseDay","releaseMonth","releaseYear","idMovie","backdrop_path","poster_path","original_title","vote_average","vote_count","popularity","overview","releaseDate","$080adeebae6155d9$var$addLeadingZero","getDate","poster","window","innerWidth","roundedPopularity","toFixed","genreNames","genre3","value","$080adeebae6155d9$var$responseUpcoming","$c1e4efc7cdd51bb4$var$CARD_BLOCK","$c1e4efc7cdd51bb4$var$getResponce","res1","optionsWeek","then","res","screen","width","$c1e4efc7cdd51bb4$var$createMarkup","slice","getGenres","$c1e4efc7cdd51bb4$var$_createMarkup","$c1e4efc7cdd51bb4$var$fetchGenresMovie","$F0m9M","galleryMarkup","$c1e4efc7cdd51bb4$var$_fetchGenresMovie","response"],"version":3,"file":"index.85265b06.js.map"}