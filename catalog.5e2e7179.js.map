{"mappings":"oeAAAA,EAAA,S,WCAA,IAAAC,EAAAD,EAAA,S,0BCAAC,EAAAD,EAAA,S,0BAMO,MAAME,EAAmBC,SAASC,cAAc,qBAC1CC,EAAiBF,SAASC,cAAc,qBAIrDE,iBACE,MACMC,SAaRD,eAAiCE,GAC/B,MAEMC,EAAc,CAClBC,OAAQ,MACRC,IAAK,mDACLC,OAAQ,CAAEC,SAAU,QAASC,KAAMN,GACnCO,QAAS,CACPC,OAAQ,mBACRC,cAAe,+NAInB,IAEE,aADuBhB,EAAAiB,QAAMC,QAAQV,IACrBW,I,CAChB,MAAOC,GACPC,QAAQD,MAAMA,GACdhB,EAAekB,MAAMC,QAAU,O,EAhCdC,CARH,IASOC,QAEjBC,QAiCRrB,iBACE,IAEE,aADuBL,EAAAiB,QAAMC,QAAQS,EAAAC,eACrBT,KAAKO,M,CACrB,MAAON,GACPC,QAAQQ,IAAIT,E,EAtCOU,GAErBxB,EAAUyB,SAAQC,IAChB,MAAMC,EAAQP,EAAOQ,MAAKC,GAASA,EAAMC,IAAMJ,EAAEK,UAAU,KAC3DL,EAAEM,WAAaL,EAAQA,EAAMM,KAAO,EAAE,IAGxCtC,EAAiBuC,WAAY,EAAAC,EAAAC,eAAcpC,E,CAb7CqC,GDHA,MAAMC,EAAS1C,SAASC,cAAc,gBAChC0C,EAAU3C,SAASC,cAAc,iBACjC2C,EAAiB5C,SAASC,cAAc,oBACxC4C,EAAc7C,SAASC,cAAc,iBAE3CyC,EAAOI,iBAAiB,UAIxB,SAA0BC,GAKxB,GAJAA,EAAMC,iBA2DR,WACEjD,EAAiBuC,UAAY,E,CA3D7BW,GACA/C,EAAekB,MAAMC,QAAU,OAEF,KAAzBsB,EAAQO,MAAMC,OAGhB,OAFAjD,EAAekB,MAAMC,QAAU,aAC/BsB,EAAQS,QAGR3B,EAAA4B,cAAc5C,OAAO6C,MAAQX,EAAQO,MAKzC/C,iBACE,MAAMc,QAmBRd,iBACE,IAEE,aADuBL,EAAAiB,QAAMC,QAAQS,EAAA4B,gBACrBpC,I,CAChB,MAAOC,GACPC,QAAQD,MAAMA,GACdhB,EAAekB,MAAMC,QAAU,O,EAzBdkC,GACb/B,QA4BRrB,iBACE,IAEE,aADuBL,EAAAiB,QAAMC,QAAQS,EAAAC,eACrBT,KAAKO,M,CACrB,MAAON,GACPC,QAAQQ,IAAIT,E,EAjCOsC,GACfpD,EAAYa,EAAKM,QAEvB,GAAyB,IAArBnB,EAAUqD,OAGZ,OAFAvD,EAAekB,MAAMC,QAAU,aAC/BuB,EAAexB,MAAMC,QAAU,SAG/BjB,EAAUyB,SAAQC,IAChB,MAAMC,EAAQP,EAAOQ,MAAKC,GAASA,EAAMC,IAAMJ,EAAEK,UAAU,KAC3DL,EAAEM,WAAaL,EAAQA,EAAMM,KAAO,EAAE,IAGxCO,EAAexB,MAAMC,QAAU,QAC/BtB,EAAiBuC,WAAY,EAAAC,EAAAC,eAAcpC,E,CApB3CsD,E,IAbJb,EAAYC,iBAAiB,SAwD7B,WACEF,EAAexB,MAAMC,QAAU,OAC/BsB,EAAQS,QACRpD,SAAS2D,SAASC,Q","sources":["src/catalog.js","src/js/pages/catalog/search.js","src/js/pages/catalog/gallery.js"],"sourcesContent":["import './js/pages/header';\nimport './js/pages/hero';\nimport './js/pages/catalog/search';\nimport './js/pages/catalog/gallery';\nimport './js/pages/catalog/pagination';\nimport './js/galleryMarkup';\nimport './js/request';\nimport './js/components/modal';\nimport './js/pages/footer';\nimport './js/components/scrollUp';","import axios from 'axios';\n\nimport { optionsSearch, optionsGenre } from '../../request.js';\nimport { galleryMarkup } from '../../galleryMarkup';\nimport { galleryContainer, catalogFailure } from './gallery.js';\n\nconst formEl = document.querySelector('#search-form');\nconst inputEl = document.querySelector('.search-field');\nconst resetContainer = document.querySelector('.reset-container');\nconst resetSearch = document.querySelector('.reset-search');\n\nformEl.addEventListener('submit', handleSubmitForm);\n\nresetSearch.addEventListener('click', handleResetSearch);\n\nfunction handleSubmitForm(event) {\n  event.preventDefault();\n  clearMarkup();\n  catalogFailure.style.display = 'none';\n\n  if (inputEl.value.trim() === '') {\n    catalogFailure.style.display = 'block';\n    inputEl.focus();\n    return;\n  } else {\n    optionsSearch.params.query = inputEl.value;\n    responseOptionsSearch();\n  }\n}\n\nasync function responseOptionsSearch() {\n  const data = await fetchOptionsSearch();\n  const genres = await fetchGenresMovie();\n  const moviesArr = data.results;\n\n  if (moviesArr.length === 0) {\n    catalogFailure.style.display = 'block';\n    resetContainer.style.display = 'block';\n    return;\n  } else {\n    moviesArr.forEach(e => {\n      const genre = genres.find(genre => genre.id == e.genre_ids[0]);\n      e.genre_name = genre ? genre.name : '';\n    });\n\n    resetContainer.style.display = 'block';\n    galleryContainer.innerHTML = galleryMarkup(moviesArr);\n  }\n}\n\nasync function fetchOptionsSearch() {\n  try {\n    const response = await axios.request(optionsSearch);\n    return response.data;\n  } catch (error) {\n    console.error(error);\n    catalogFailure.style.display = 'block';\n  }\n}\n\nasync function fetchGenresMovie() {\n  try {\n    const response = await axios.request(optionsGenre);\n    return response.data.genres;\n  } catch (error) {\n    console.log(error);\n  }\n}\n\nfunction handleResetSearch() {\n  resetContainer.style.display = 'none';\n  inputEl.focus();\n  document.location.reload();\n}\n\nfunction clearMarkup() {\n  galleryContainer.innerHTML = '';\n}\n\n// Additional functionality\n\n// const selectElement = document.getElementById('year');\n// const placeholderOption = document.createElement('option');\n\n// placeholderOption.value = '';\n// placeholderOption.textContent = 'Year';\n// placeholderOption.disabled = true;\n// placeholderOption.selected = true;\n// selectElement.appendChild(placeholderOption);\n\n// const currentYear = new Date().getFullYear();\n\n// for (let year = currentYear; year >= 2015; year -= 1) {\n//   const optionElement = document.createElement('option');\n//   optionElement.value = year;\n//   optionElement.textContent = year;\n//   selectElement.appendChild(optionElement);\n// }\n\n// selectElement.addEventListener('change', function () {\n//   const selectedYear = selectElement.value;\n//   console.log(selectedYear);\n// });\n","import axios from 'axios';\nimport { galleryMarkup } from '../../galleryMarkup';\nimport { optionsGenre } from '../../request';\n\nlet currentPage = 1;\n\nexport const galleryContainer = document.querySelector('.movies-container');\nexport const catalogFailure = document.querySelector('.catalog-failure');\n\nresponseWeeklytrends();\n\nasync function responseWeeklytrends() {\n  const data = await fetchWeeklytrends(currentPage);\n  const moviesArr = data.results;\n\n  const genres = await fetchGenresMovie();\n\n  moviesArr.forEach(e => {\n    const genre = genres.find(genre => genre.id == e.genre_ids[0]);\n    e.genre_name = genre ? genre.name : '';\n  });\n\n  galleryContainer.innerHTML = galleryMarkup(moviesArr);\n//   getTargetMovieContainer();\n}\n\nasync function fetchWeeklytrends(currentPage) {\n  const ACCESS_KEY =\n    'eyJhbGciOiJIUzI1NiJ9.eyJhdWQiOiJkOTZiN2ExNTYwNGYwMmExYWNkMTVhNWJlY2JmMjQ4MCIsInN1YiI6IjY0ODNhYTBhOTkyNTljMDBlMmY0NWE4ZSIsInNjb3BlcyI6WyJhcGlfcmVhZCJdLCJ2ZXJzaW9uIjoxfQ._Sdbi-2PalUFAI7K7hzIv-hc4p92EU6q_yg6_IJJHjA';\n  const optionsWeek = {\n    method: 'GET',\n    url: 'https://api.themoviedb.org/3/trending/movie/week',\n    params: { language: 'en-US', page: currentPage },\n    headers: {\n      accept: 'application/json',\n      Authorization: `Bearer ${ACCESS_KEY}`,\n    },\n  };\n\n  try {\n    const response = await axios.request(optionsWeek);\n    return response.data;\n  } catch (error) {\n    console.error(error);\n    catalogFailure.style.display = 'block';\n  }\n}\n\nasync function fetchGenresMovie() {\n  try {\n    const response = await axios.request(optionsGenre);\n    return response.data.genres;\n  } catch (error) {\n    console.log(error);\n  }\n}\n\n// function getTargetMovieContainer() {\n//   const targetMovieContainer = document.querySelector('.movies-container');\n//   targetMovieContainer.addEventListener('click', handleMovieContainer);\n// }\n\n// function handleMovieContainer(event) {\n//   const targetMovieCardID = event.target.closest('.movie-card').dataset.id;\n//   alert(`Open Modal window by ID ${targetMovieCardID}`);\n// }\n"],"names":["parcelRequire","$2shzp","$51dd2822a64384f3$export$291a2a9bb1cdfe3d","document","querySelector","$51dd2822a64384f3$export$112dc3a80752c131","async","moviesArr","currentPage1","optionsWeek","method","url","params","language","page","headers","accept","Authorization","default","request","data","error","console","style","display","$51dd2822a64384f3$var$fetchWeeklytrends","results","genres","$e5MbR","optionsGenre","log","$51dd2822a64384f3$var$fetchGenresMovie","forEach","e","genre1","find","genre","id","genre_ids","genre_name","name","innerHTML","$isemc","galleryMarkup","$51dd2822a64384f3$var$responseWeeklytrends","$91deb333848ec361$var$formEl","$91deb333848ec361$var$inputEl","$91deb333848ec361$var$resetContainer","$91deb333848ec361$var$resetSearch","addEventListener","event","preventDefault","$91deb333848ec361$var$clearMarkup","value","trim","focus","optionsSearch","query","$91deb333848ec361$var$fetchOptionsSearch","$91deb333848ec361$var$fetchGenresMovie","length","$91deb333848ec361$var$responseOptionsSearch","location","reload"],"version":3,"file":"catalog.5e2e7179.js.map"}