{"mappings":"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","sources":["src/index.js","src/js/pages/home/monthly_trends.js","src/js/components/loader.js","src/js/pages/home/weekly_trends.js"],"sourcesContent":["import './js/pages/header';\nimport './js/pages/hero';\nimport './js/pages/home/monthly_trends';\nimport './js/pages/home/weekly_trends';\nimport './js/galleryMarkup';\nimport './js/request';\nimport './js/components/modal';\nimport './js/pages/footer';\nimport './js/components/scrollUp';\nimport './js/components/loader';","import axios from 'axios';\nimport { optionsUpcoming } from '../../request';\nimport { optionsGenre } from '../../request';\nimport { showLoader, hideLoader } from '../../components/loader';\n\nconst containerMovie = document.querySelector('.container-upcoming-movie');\n\nasync function fetchUpcomingMovie() {\n  try {\n    showLoader();\n    const response = await axios.request(optionsUpcoming);\n    return response.data;\n  } catch (error) {\n    console.error(error);\n    containerMovie.innerHTML = markupError();\n  } finally {\n    hideLoader();\n  }\n}\nasync function fetchGenresMovie(id) {\n  try {\n    const genres = await axios.request(optionsGenre);\n    return genres.data.genres;\n  } catch (error) {\n    console.log(error);\n    return [];\n  }\n}\n\nasync function responseUpcoming() {\n  try {\n    showLoader();\n    const data = await fetchUpcomingMovie();\n    const movieInfo = data.results;\n    const randomIndex = Math.floor(Math.random() * movieInfo.length);\n    const randomMovie = movieInfo[randomIndex];\n    const id = randomMovie.id;\n    const genres = await fetchGenresMovie(id);\n\n    if (genres.length === 0) {\n      containerMovie.innerHTML = createMarkupUpcoming(movieInfo, []);\n    } else {\n      generateGenres(movieInfo, genres);\n      containerMovie.innerHTML = createMarkupUpcoming(movieInfo, genres);\n    }\n  } finally {\n    hideLoader();\n  }\n}\n\nfunction generateGenres(movieInfo, genres) {\n  const genresName = [];\n  movieInfo.forEach(movie => {\n    const genreNames = [];\n    movie.genre_ids.forEach(genreId => {\n      const genre = genres.find(genre => genre.id === genreId);\n      if (genre) {\n        genreNames.push(genre.name);\n      }\n    });\n    genresName.push(genreNames.join(', '));\n  });\n}\n\nfunction createMarkupUpcoming(movieInfo, genres) {\n  const currentDate = new Date();\n  const year = currentDate.getFullYear();\n  const month = String(currentDate.getMonth() + 1).padStart(2, '0');\n  const thisMonth = `${year}-${month}-01`;\n\n  const filteredMovies = movieInfo.filter(\n    movie => movie.release_date >= thisMonth\n  );\n  const randomIndex = Math.floor(Math.random() * filteredMovies.length);\n  const randomMovie = filteredMovies[randomIndex];\n  const {\n    id: idMovie,\n    backdrop_path,\n    poster_path,\n    original_title,\n    release_date,\n    vote_average,\n    vote_count,\n    popularity,\n    genre_ids,\n    overview,\n  } = randomMovie;\n\n  const releaseDay = addLeadingZero(new Date(release_date).getDate());\n  const releaseMonth = addLeadingZero(new Date(release_date).getMonth() + 1);\n  const releaseYear = new Date(release_date).getFullYear();\n\n  let poster = null;\n\n  const screenWidth = window.innerWidth;\n\n  if (screenWidth <= 767 && poster_path) {\n    poster = `https://image.tmdb.org/t/p/original/${poster_path}`;\n  } else if (backdrop_path) {\n    poster = `https://image.tmdb.org/t/p/original/${backdrop_path}`;\n  } else {\n    poster = `https://astoriamuseums.org/wp-content/uploads/2020/10/OFM-poster-not-available.png`;\n  }\n\n  const roundedPopularity = popularity.toFixed(1);\n\n  const genreNames = genre_ids.map(genreId => {\n    const genre = genres.find(genre => genre.id === genreId);\n    return genre ? genre.name : '';\n  });\n\n  return `\n    <img width=\"280\" height=\"402\" class=\"upcoming-image\"  src=\"${poster}\" alt=\"${original_title}\">\n    <div class=\"info-container\" >\n    <h3 class=\"upcoming-movie-title\">${original_title}</h3>\n    <ul class=\"upcoming-list-details list\">\n      <li class=\"upcoming-list-details-item\">\n        <p class=\"upcoming-list-details-subtitle\">Release date</p>\n        <p class=\"upcoming-realese-date\">${releaseDay}.${releaseMonth}.${releaseYear}</p>\n      </li>\n      <li class=\"upcoming-list-details-item\">\n        <p class=\"upcoming-list-details-subtitle\">Vote / Votes</p>\n        <p class=\"upcoming-votes\"><span>${vote_average}</span> / <span>${vote_count}</span></p>\n      </li>\n      <li class=\"upcoming-list-details-item\">\n        <p class=\"upcoming-list-details-subtitle\">Popularity</p>\n        <p class=\"upcoming-popularity\">${roundedPopularity}</p>\n      </li>\n      <li class=\"upcoming-list-details-item\">\n        <p class=\"upcoming-list-details-subtitle\">Genre</p>\n        <p class=\"genre\">${genreNames.join(', ')}</p>\n      </li>\n    </ul>\n    <h4 class=\"upcoming-about\">ABOUT</h4>\n    <p class=\"upcoming-about-text\">${overview}</p>\n    <button class=\"btn upcoming-btn-add btn-accent\" data-id=\"${idMovie}\" type=\"button\">\n    <span class=\"btn-in upcoming-btn-add-span\" >Add to my library</span></button>\n    <button class=\"btn upcoming-btn-remove btn-dark\" data-id=\"${idMovie}\" hidden  type=\"button\">\n    <span class=\"btn-in upcoming-btn-remove-span\"  >Remove from my library</span></button>\n    </div>\n  `;\n}\n\n// ERROR//\n\nfunction markupError() {\n  console.log('hello');\n  return `      \n<h2 class=\"upcoming-error\">\nOOPS...<br>\nWe are very sorry!<br>\nSomething went wrong.</h2>`;\n}\n\nfunction addLeadingZero(value) {\n  return String(value).padStart(2, '0');\n}\n// BUTTON//\n\ncontainerMovie.addEventListener('click', onClickAddToLocalStorage);\n\nfunction onClickAddToLocalStorage(event) {\n  event.preventDefault();\n  const target = event.target;\n  if (target.classList.contains('upcoming-btn-add-span')) {\n    addToLocalStorage(event);\n  } else if (target.classList.contains('upcoming-btn-remove-span')) {\n    removeFromLocalStorage(event);\n  }\n}\n\nfunction addToLocalStorage(e) {\n  const addToLibraryBtn = e.target.parentNode;\n  addToLibraryBtn.style.display = 'none';\n  const removeFromLibraryBtn = addToLibraryBtn.nextElementSibling;\n  removeFromLibraryBtn.style.display = 'block';\n}\nfunction removeFromLocalStorage(e) {\n  const removeFromLibraryBtn = e.target.parentNode;\n  removeFromLibraryBtn.style.display = 'none';\n  const addToLibraryBtn = removeFromLibraryBtn.previousElementSibling;\n  addToLibraryBtn.style.display = 'block';\n}\nresponseUpcoming();\n","// Щоб дадати loader до своєї сторінки потрібно:\n// 1. Додати  <span class=\"loader\"></span> до свого HTML у потрібному місці (перед ДОМ)\n// 2. зробити імпорт у свій файл JS: import { showLoader, hideLoader } from '../../components/loader';\n// 3. Викликати  showLoader() в конструкції try перед асинхронним запитом \n// 4. Викликати hideLoader() в конструкції finally\n// Підглянути можна в monthly.trends.js\n\nconst loader = document.querySelector('.loader');\n\nfunction showLoader() {\n  loader.style.display = 'block';\n}\n\nfunction hideLoader() {\n  loader.style.display = 'none';\n}\nexport { showLoader, hideLoader}\n","import axios from 'axios';\nimport { galleryMarkup } from '../../galleryMarkup';\nimport { optionsWeek } from '../../request';\n\nconst API_KEY = 'e80fd9fb75f14049ed52c4547080278b';\nconst CARD_BLOCK = document.querySelector('.movies-container');\nconst getResponce = async () => {\n  try {\n    const res = axios.request(optionsWeek);\n    return res.then(res => {\n      if (window.screen.width <= 768) {\n        createMarkup(res.data.results.slice(0, 1));\n      } else {\n        createMarkup(res.data.results.slice(0, 3));\n      }\n    });\n  } catch (error) {\n    console.log(error);\n  }\n};\ngetResponce();\nfunction createMarkup(data) {\n  CARD_BLOCK.insertAdjacentHTML('beforeend', galleryMarkup(data));\n}\n"],"names":["parcelRequire","$2shzp","$770740dca78365cc$var$loader","document","querySelector","$770740dca78365cc$export$56525cbb1fcd885c","style","display","$770740dca78365cc$export$5cee2c2772922923","$db4dcec9f7e39aa5$var$containerMovie","async","$db4dcec9f7e39aa5$var$fetchUpcomingMovie","default","request","$e5MbR","optionsUpcoming","data","error","console","innerHTML","log","$db4dcec9f7e39aa5$var$createMarkupUpcoming","movieInfo","genres","currentDate","Date","thisMonth","getFullYear","String","getMonth","padStart","filteredMovies","filter","movie","release_date","randomMovie","Math","floor","random","length","id","idMovie","backdrop_path","poster_path","original_title","vote_average","vote_count","popularity","genre_ids","overview","releaseDay","$db4dcec9f7e39aa5$var$addLeadingZero","getDate","releaseMonth","releaseYear","poster","window","innerWidth","toFixed","map","genreId","genre2","find","genre","name","join","value","addEventListener","event","preventDefault","target","classList","contains","e","addToLibraryBtn","parentNode","nextElementSibling","$db4dcec9f7e39aa5$var$addToLocalStorage","removeFromLibraryBtn","previousElementSibling","$db4dcec9f7e39aa5$var$removeFromLocalStorage","results","randomIndex","optionsGenre","$db4dcec9f7e39aa5$var$fetchGenresMovie","genresName","forEach","genreNames","genre1","push","$db4dcec9f7e39aa5$var$generateGenres","$db4dcec9f7e39aa5$var$responseUpcoming","$f3f8ccbc0519c503$var$CARD_BLOCK","$f3f8ccbc0519c503$var$createMarkup","insertAdjacentHTML","$isemc","galleryMarkup","optionsWeek","then","res","screen","width","slice","$f3f8ccbc0519c503$var$getResponce"],"version":3,"file":"index.259d3e2a.js.map"}