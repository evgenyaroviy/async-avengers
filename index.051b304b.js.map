{"mappings":"iiBAAAA,EAAA,S,WCAA,IAAAC,EAAAD,EAAA,S,gFAMME,EAAiBC,SAASC,cAAc,6B,SAE/BC,I,OAAAC,EAAkBC,MAAAC,KAAAC,U,UAAlBH,I,OAAAA,EAAfI,EAAAT,EAAA,CAAAS,EAAAC,GAAAC,MAAA,SAAAC,I,IAGUC,E,mFADN,EAAAC,EAAAC,c,SACuBC,EAAAC,QAAMC,QAAQC,EAAAC,iB,cAA/BP,EAAQQ,EAAAC,K,kBACPT,EAASU,M,gCAEhBC,QAAQC,MAAKJ,EAAAK,IACbzB,EAAe0B,UAAYC,I,0BAE3B,EAAAd,EAAAe,c,6EAT6BvB,MAAAC,KAAAC,U,UAYlBsB,EAAiBC,G,OAAjBC,EAAgB1B,MAAAC,KAAAC,U,UAAhBwB,I,OAAAA,EAAfvB,EAAAT,EAAA,CAAAS,EAAAC,GAAAC,MAAA,SAAAC,EAAgCmB,G,IAEtBE,E,2FAAejB,EAAAC,QAAMC,QAAQC,EAAAe,c,cAA7BD,EAAMZ,EAAAC,K,kBACLW,EAAOV,KAAKU,Q,uCAEnBT,QAAQW,IAAGd,EAAAK,I,kBACJ,I,0DANoBpB,MAAAC,KAAAC,U,CAc/B,SAAS4B,EAAmBC,GAC1B,IAAMC,EAAc,IAAIC,KAClBC,EAAOF,EAAYG,cACnBC,EAAQC,OAAOL,EAAYM,WAAa,GAAGC,SAAS,EAAG,KACvDC,EAAY,GAAWC,OAARP,EAAK,KAASO,OAANL,EAAM,OAC7BM,EAAiBX,EAAUY,QAC/B,SAAAC,G,OAASA,EAAMC,cAAgBL,C,IAIjC,OADwBE,EADAI,KAAKC,MAAMD,KAAKE,SAAWN,EAAeO,Q,UAIrDC,I,OAAAA,EAAf/C,EAAAT,EAAA,CAAAS,EAAAC,GAAAC,MAAA,SAAAC,I,IAGUW,EACAc,EACAoB,EACAC,EACA3B,EACAE,EACA0B,EAMGC,E,yEAATA,EAAA,SAAkCC,GAChCA,EAAMC,iBAEN,IAAMC,EAASF,EAAME,OACjBA,EAAOC,UAAUC,SAAS,0BAC5B,EAAAC,EAAAC,mBAAkBN,EAAMF,GACfI,EAAOC,UAAUC,SAAS,8BACnC,EAAAC,EAAAE,wBAAuBP,EAAMF,E,YApBjC,EAAA7C,EAAAC,c,SACmBX,I,cAAbmB,EAAIF,EAAAC,KACJe,EAAYd,EAAK8C,QACjBZ,EAAcL,KAAKC,MAAMD,KAAKE,SAAWjB,EAAUkB,QACnDG,EAAcrB,EAAUoB,GACxB1B,EAAK2B,EAAY3B,G,UACFD,EAAiBC,G,QAAhCE,EAAMZ,EAAAC,KACNqC,EAAkBvB,EAAmBC,GAG/CpC,EAAeqE,iBAAiB,QAASV,GAcf,IAAlB3B,EAAOsB,OACTtD,EAAe0B,UAAY4C,EAAsB,GAAGZ,IAEpDa,EAAenC,EAAWJ,GAC1BhC,EAAe0B,UAAY4C,EAAsBtC,EAAO0B,I,0BAG1D,EAAA7C,EAAAe,c,4EAjC2BvB,MAAAC,KAAAC,U,CAqC/B,SAASgE,EAAenC,EAAWJ,GACjC,IAAMwC,EAAa,GACnBpC,EAAUqC,SAAQ,SAAAxB,GAChB,IAAMyB,EAAa,GACnBzB,EAAM0B,UAAUF,SAAQ,SAAAG,GACtB,IAAMC,EAAQ7C,EAAO8C,MAAK,SAAAC,G,OAASA,EAAMjD,KAAO8C,C,IAC5CC,GACFH,EAAWM,KAAKH,EAAMI,K,IAG1BT,EAAWQ,KAAKN,EAAWQ,KAAK,M,IAIpC,SAASZ,EAAsBtC,EAAOyB,GAWpC,IACE0B,EAUE1B,EAVF3B,GACAsD,EASE3B,EATF2B,cACAC,EAQE5B,EARF4B,YACAC,EAOE7B,EAPF6B,eACApC,EAMEO,EANFP,aACAqC,EAKE9B,EALF8B,aACAC,EAIE/B,EAJF+B,WACAC,EAGEhC,EAHFgC,WACAd,EAEElB,EAFFkB,UACAe,EACEjC,EADFiC,SAGIC,EAAaC,EAAe,IAAItD,KAAKY,GAAc2C,WACnDC,EAAeF,EAAe,IAAItD,KAAKY,GAAcP,WAAa,GAClEoD,EAAc,IAAIzD,KAAKY,GAAcV,cAEvCwD,EAAS,KAKXA,EAHkBC,OAAOC,YAER,KAAOb,EACf,uCAAmDvC,OAAZuC,GACvCD,EACA,uCAAqDtC,OAAdsC,GAEtC,qFAGZ,IAAMe,EAAoBV,EAAWW,QAAQ,GAEvC1B,EAAaC,EAAU0B,KAAI,SAAAzB,GAC/B,IAAM0B,EAAQtE,EAAO8C,MAAK,SAAAC,G,OAASA,EAAMjD,KAAO8C,C,IAChD,OAAO0B,EAAQA,EAAMrB,KAAO,E,IAG9B,MAAO,oEACwEnC,OAAhBkD,EAAO,WAEjClD,OAF0CwC,EAAe,gFAMrDxC,OAJJwC,EAAe,oNAIGxC,OAAd6C,EAAW,KAAmB7C,OAAhBgD,EAAa,KAI5BhD,OAJ+BiD,EAAY,kLAIZjD,OAA/ByC,EAAa,oBAIdzC,OAJgC0C,EAAW,sLAQzD1C,OAJcqD,EAAkB,4JAQtBrD,OAJV4B,EAAWQ,KAAK,MAAM,gHAKcpC,OAD1B4C,EAAS,uEAGkB5C,OAFDqC,EAAQ,uKAECrC,OAARqC,EAAQ,uI,CAQxE,SAASxD,IAEP,OADAJ,QAAQW,IAAI,SACJ,sG,CAOV,SAAS0D,EAAeW,GACtB,OAAO7D,OAAO6D,GAAO3D,SAAS,EAAG,I,aA9IpBW,EAAgBlD,MAAAC,KAAAC,U,CAgK/BiG,GC9MAzG,EAAAD,EAAA,S,0BAAA,I,eAIM2G,G,aAAaxG,SAASC,cAAc,sBACpCwG,G,EAAclG,EAAAT,EAAA,CAAAS,EAAAC,GAAAC,MAAA,SAAAC,I,IAEVgG,E,kFAAAA,EAAM5F,EAAAC,QAAMC,QAAQC,EAAA0F,a,kBACnBD,EAAIE,MAAK,SAAAC,GACVb,OAAOc,OAAOC,OAAS,IACzBC,EAAaH,EAAIxF,KAAK8C,QAAQ8C,MAAM,EAAG,IAEvCD,EAAaH,EAAIxF,KAAK8C,QAAQ8C,MAAM,EAAG,G,qCAI3C3F,QAAQW,IAAGd,EAAAK,I,oGAIf,SAASwF,EAAa3F,GACpBmF,EAAWU,mBAAmB,aAAa,EAAAC,EAAAC,eAAc/F,G,CAF3DoF,I","sources":["src/index.js","src/js/pages/home/monthly_trends.js","src/js/pages/home/weekly_trends.js"],"sourcesContent":["import './js/pages/header';\nimport './js/pages/hero';\nimport './js/pages/home/monthly_trends';\nimport './js/pages/home/weekly_trends';\nimport './js/galleryMarkup';\nimport './js/request';\nimport './js/components/modal';\nimport './js/pages/footer';\nimport './js/components/scrollUp';\nimport './js/components/loader';","import axios from 'axios';\nimport { optionsUpcoming } from '../../request';\nimport { optionsGenre } from '../../request';\nimport { showLoader, hideLoader } from '../../components/loader';\nimport {removeFromLocalStorage , addToLocalStorage,moviesIdList,MOVIES_LIST_KEY} from '../../components/localStorageBtn'\n\nconst containerMovie = document.querySelector('.container-upcoming-movie');\n\nasync function fetchUpcomingMovie() {\n  try {\n    showLoader();\n    const response = await axios.request(optionsUpcoming);\n    return response.data;\n  } catch (error) {\n    console.error(error);\n    containerMovie.innerHTML = markupError();\n  } finally {\n    hideLoader();\n  }\n}\nasync function fetchGenresMovie(id) {\n  try {\n    const genres = await axios.request(optionsGenre);\n    return genres.data.genres;\n  } catch (error) {\n    console.log(error);\n    return [];\n  }\n}\ntry{\n\n}catch{\n  \n}\nfunction createRandomMovies(movieInfo){\n  const currentDate = new Date();\n  const year = currentDate.getFullYear();\n  const month = String(currentDate.getMonth() + 1).padStart(2, '0');\n  const thisMonth = `${year}-${month}-01`;\n  const filteredMovies = movieInfo.filter(\n    movie => movie.release_date >= thisMonth\n  );\n  const randomIndexFilm = Math.floor(Math.random() * filteredMovies.length);\n  const randomMovieFilm = filteredMovies[randomIndexFilm];\n  return randomMovieFilm\n}\nasync function responseUpcoming() {\n  try {\n    showLoader();\n    const data = await fetchUpcomingMovie();\n    const movieInfo = data.results;\n    const randomIndex = Math.floor(Math.random() * movieInfo.length);\n    const randomMovie = movieInfo[randomIndex];\n    const id = randomMovie.id;\n    const genres = await fetchGenresMovie(id);\n    const randomMovieFilm = createRandomMovies(movieInfo)\n    //local\n    // BUTTON//\ncontainerMovie.addEventListener('click', onClickAddToLocalStorage);\n\n\n    function onClickAddToLocalStorage(event) {\n      event.preventDefault();\n    \n      const target = event.target;\n      if (target.classList.contains('upcoming-btn-add-span')) {\n        addToLocalStorage(event,randomMovieFilm);\n      } else if (target.classList.contains('upcoming-btn-remove-span')) {\n        removeFromLocalStorage(event,randomMovieFilm);\n      }\n    }\n  //local\n    if (genres.length === 0) {\n      containerMovie.innerHTML = createMarkupUpcoming( [],randomMovieFilm);\n    } else {\n      generateGenres(movieInfo, genres);\n      containerMovie.innerHTML = createMarkupUpcoming( genres,randomMovieFilm);\n    }\n  } finally {\n    hideLoader();\n  }\n}\n\nfunction generateGenres(movieInfo, genres) {\n  const genresName = [];\n  movieInfo.forEach(movie => {\n    const genreNames = [];\n    movie.genre_ids.forEach(genreId => {\n      const genre = genres.find(genre => genre.id === genreId);\n      if (genre) {\n        genreNames.push(genre.name);\n      }\n    });\n    genresName.push(genreNames.join(', '));\n  });\n}\n\nfunction createMarkupUpcoming( genres,randomMovie) {\n  // const currentDate = new Date();\n  // const year = currentDate.getFullYear();\n  // const month = String(currentDate.getMonth() + 1).padStart(2, '0');\n  // const thisMonth = `${year}-${month}-01`;\n\n  // const filteredMovies = movieInfo.filter(\n  //   movie => movie.release_date >= thisMonth\n  // );\n  // const randomIndex = Math.floor(Math.random() * filteredMovies.length);\n  // const randomMovie = filteredMovies[randomIndex];\n  const {\n    id: idMovie,\n    backdrop_path,\n    poster_path,\n    original_title,\n    release_date,\n    vote_average,\n    vote_count,\n    popularity,\n    genre_ids,\n    overview,\n  } = randomMovie;\n\n  const releaseDay = addLeadingZero(new Date(release_date).getDate());\n  const releaseMonth = addLeadingZero(new Date(release_date).getMonth() + 1);\n  const releaseYear = new Date(release_date).getFullYear();\n\n  let poster = null;\n\n  const screenWidth = window.innerWidth;\n\n  if (screenWidth <= 767 && poster_path) {\n    poster = `https://image.tmdb.org/t/p/original/${poster_path}`;\n  } else if (backdrop_path) {\n    poster = `https://image.tmdb.org/t/p/original/${backdrop_path}`;\n  } else {\n    poster = `https://astoriamuseums.org/wp-content/uploads/2020/10/OFM-poster-not-available.png`;\n  }\n\n  const roundedPopularity = popularity.toFixed(1);\n\n  const genreNames = genre_ids.map(genreId => {\n    const genre = genres.find(genre => genre.id === genreId);\n    return genre ? genre.name : '';\n  });\n\n  return `\n    <img width=\"280\" height=\"402\" class=\"upcoming-image\"  src=\"${poster}\" alt=\"${original_title}\">\n    <div class=\"info-container\" >\n    <h3 class=\"upcoming-movie-title\">${original_title}</h3>\n    <ul class=\"upcoming-list-details list\">\n      <li class=\"upcoming-list-details-item\">\n        <p class=\"upcoming-list-details-subtitle\">Release date</p>\n        <p class=\"upcoming-realese-date\">${releaseDay}.${releaseMonth}.${releaseYear}</p>\n      </li>\n      <li class=\"upcoming-list-details-item\">\n        <p class=\"upcoming-list-details-subtitle\">Vote / Votes</p>\n        <p class=\"upcoming-votes\"><span>${vote_average}</span> / <span>${vote_count}</span></p>\n      </li>\n      <li class=\"upcoming-list-details-item\">\n        <p class=\"upcoming-list-details-subtitle\">Popularity</p>\n        <p class=\"upcoming-popularity\">${roundedPopularity}</p>\n      </li>\n      <li class=\"upcoming-list-details-item\">\n        <p class=\"upcoming-list-details-subtitle\">Genre</p>\n        <p class=\"genre\">${genreNames.join(', ')}</p>\n      </li>\n    </ul>\n    <h4 class=\"upcoming-about\">ABOUT</h4>\n    <p class=\"upcoming-about-text\">${overview}</p>\n    <button class=\"btn upcoming-btn-add btn-accent\" data-id=\"${idMovie}\" type=\"button\">\n    <span class=\"btn-in upcoming-btn-add-span\" >Add to my library</span></button>\n    <button class=\"btn upcoming-btn-remove btn-dark\" data-id=\"${idMovie}\" hidden  type=\"button\">\n    <span class=\"btn-in upcoming-btn-remove-span\"  >Remove from my library</span></button>\n    </div>\n  `;\n}\n\n// ERROR//\n\nfunction markupError() {\n  console.log('hello');\n  return `      \n<h2 class=\"upcoming-error\">\nOOPS...<br>\nWe are very sorry!<br>\nSomething went wrong.</h2>`;\n}\n\nfunction addLeadingZero(value) {\n  return String(value).padStart(2, '0');\n}\n\n\n\n\n// function addToLocalStorage(e) {\n//   const addToLibraryBtn = e.target.parentNode;\n//   addToLibraryBtn.style.display = 'none';\n//   const removeFromLibraryBtn = addToLibraryBtn.nextElementSibling;\n//   removeFromLibraryBtn.style.display = 'block';\n// }\n// function removeFromLocalStorage(e) {\n//   const removeFromLibraryBtn = e.target.parentNode;\n//   removeFromLibraryBtn.style.display = 'none';\n//   const addToLibraryBtn = removeFromLibraryBtn.previousElementSibling;\n//   addToLibraryBtn.style.display = 'block';\n// }\nresponseUpcoming();\n","import axios from 'axios';\nimport { galleryMarkup } from '../../galleryMarkup';\nimport { optionsWeek } from '../../request';\n\nconst CARD_BLOCK = document.querySelector('.movies-container');\nconst getResponce = async () => {\n  try {\n    const res = axios.request(optionsWeek);\n    return res.then(res => {\n      if (window.screen.width <= 768) {\n        createMarkup(res.data.results.slice(0, 1));\n      } else {\n        createMarkup(res.data.results.slice(0, 3));\n      }\n    });\n  } catch (error) {\n    console.log(error);\n  }\n};\ngetResponce();\nfunction createMarkup(data) {\n  CARD_BLOCK.insertAdjacentHTML('beforeend', galleryMarkup(data));\n}\n"],"names":["parcelRequire","$bpxeT","$080adeebae6155d9$var$containerMovie","document","querySelector","$080adeebae6155d9$var$fetchUpcomingMovie","$080adeebae6155d9$var$_fetchUpcomingMovie","apply","this","arguments","$parcel$interopDefault","$2TvXO","mark","_callee","response","$iPy5Q","showLoader","$dIxxU","default","request","$944jd","optionsUpcoming","_ctx","sent","data","console","error","t0","innerHTML","$080adeebae6155d9$var$markupError","hideLoader","$080adeebae6155d9$var$fetchGenresMovie","id","$080adeebae6155d9$var$_fetchGenresMovie","genres","optionsGenre","log","$080adeebae6155d9$var$createRandomMovies","movieInfo","currentDate","Date","year","getFullYear","month","String","getMonth","padStart","thisMonth","concat","filteredMovies","filter","movie","release_date","Math","floor","random","length","$080adeebae6155d9$var$_responseUpcoming","randomIndex","randomMovie","randomMovieFilm","onClickAddToLocalStorage","event","preventDefault","target","classList","contains","$bNU16","addToLocalStorage","removeFromLocalStorage","results","addEventListener","$080adeebae6155d9$var$createMarkupUpcoming","$080adeebae6155d9$var$generateGenres","genresName","forEach","genreNames","genre_ids","genreId","genre1","find","genre","push","name","join","idMovie","backdrop_path","poster_path","original_title","vote_average","vote_count","popularity","overview","releaseDay","$080adeebae6155d9$var$addLeadingZero","getDate","releaseMonth","releaseYear","poster","window","innerWidth","roundedPopularity","toFixed","map","genre2","value","$080adeebae6155d9$var$responseUpcoming","$c1e4efc7cdd51bb4$var$CARD_BLOCK","$c1e4efc7cdd51bb4$var$getResponce","res1","optionsWeek","then","res","screen","width","$c1e4efc7cdd51bb4$var$createMarkup","slice","insertAdjacentHTML","$F0m9M","galleryMarkup"],"version":3,"file":"index.051b304b.js.map"}