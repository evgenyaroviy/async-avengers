{"mappings":"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","sources":["src/catalog.js","src/js/pages/catalog/search.js","src/js/pages/catalog/gallery.js"],"sourcesContent":["import './js/pages/header';\nimport './js/pages/hero';\nimport './js/pages/catalog/search';\nimport './js/pages/catalog/gallery';\nimport './js/pages/catalog/pagination';\nimport './js/galleryMarkup';\nimport './js/request';\nimport './js/components/modal';\nimport './js/pages/footer';\nimport './js/components/scrollUp';","import axios from 'axios';\n\nimport { optionsSearch, optionsGenre } from '../../request.js';\nimport { galleryMarkup } from '../../galleryMarkup';\nimport { galleryContainer, catalogFailure } from './gallery.js';\n\nconst formEl = document.querySelector('#search-form');\nconst inputEl = document.querySelector('.search-field');\nconst resetContainer = document.querySelector('.reset-container');\nconst resetSearch = document.querySelector('.reset-search');\n\nformEl.addEventListener('submit', handleSubmitForm);\n\nresetSearch.addEventListener('click', handleResetSearch);\n\nfunction handleSubmitForm(event) {\n  event.preventDefault();\n  clearMarkup();\n  catalogFailure.style.display = 'none';\n\n  if (inputEl.value.trim() === '') {\n    catalogFailure.style.display = 'block';\n    inputEl.focus();\n    return;\n  } else {\n    optionsSearch.params.query = inputEl.value;\n    responseOptionsSearch();\n  }\n}\n\nasync function responseOptionsSearch() {\n  const data = await fetchOptionsSearch();\n  const genres = await fetchGenresMovie();\n  const moviesArr = data.results;\n\n  if (moviesArr.length === 0) {\n    catalogFailure.style.display = 'block';\n    resetContainer.style.display = 'block';\n    return;\n  } else {\n    moviesArr.forEach(e => {\n      const genre = genres.find(genre => genre.id == e.genre_ids[0]);\n      e.genre_name = genre ? genre.name : '';\n    });\n\n    resetContainer.style.display = 'block';\n    galleryContainer.innerHTML = galleryMarkup(moviesArr);\n  }\n}\n\nasync function fetchOptionsSearch() {\n  try {\n    const response = await axios.request(optionsSearch);\n    return response.data;\n  } catch (error) {\n    console.error(error);\n    catalogFailure.style.display = 'block';\n  }\n}\n\nasync function fetchGenresMovie() {\n  try {\n    const response = await axios.request(optionsGenre);\n    return response.data.genres;\n  } catch (error) {\n    console.log(error);\n  }\n}\n\nfunction handleResetSearch() {\n  resetContainer.style.display = 'none';\n  inputEl.focus();\n  document.location.reload();\n}\n\nfunction clearMarkup() {\n  galleryContainer.innerHTML = '';\n}\n\n// Additional functionality\n\n// const selectElement = document.getElementById('year');\n// const placeholderOption = document.createElement('option');\n\n// placeholderOption.value = '';\n// placeholderOption.textContent = 'Year';\n// placeholderOption.disabled = true;\n// placeholderOption.selected = true;\n// selectElement.appendChild(placeholderOption);\n\n// const currentYear = new Date().getFullYear();\n\n// for (let year = currentYear; year >= 2015; year -= 1) {\n//   const optionElement = document.createElement('option');\n//   optionElement.value = year;\n//   optionElement.textContent = year;\n//   selectElement.appendChild(optionElement);\n// }\n\n// selectElement.addEventListener('change', function () {\n//   const selectedYear = selectElement.value;\n//   console.log(selectedYear);\n// });\n","import axios from 'axios';\nimport { galleryMarkup } from '../../galleryMarkup';\nimport { optionsGenre } from '../../request';\n\nlet currentPage = 1;\n\nexport const galleryContainer = document.querySelector('.movies-container');\nexport const catalogFailure = document.querySelector('.catalog-failure');\n\nresponseWeeklytrends();\n\nasync function responseWeeklytrends() {\n  const data = await fetchWeeklytrends(currentPage);\n  const moviesArr = data.results;\n\n  const genres = await fetchGenresMovie();\n\n  moviesArr.forEach(e => {\n    const genre = genres.find(genre => genre.id == e.genre_ids[0]);\n    e.genre_name = genre ? genre.name : '';\n  });\n\n  galleryContainer.innerHTML = galleryMarkup(moviesArr);\n//   getTargetMovieContainer();\n}\n\nasync function fetchWeeklytrends(currentPage) {\n  const ACCESS_KEY =\n    'eyJhbGciOiJIUzI1NiJ9.eyJhdWQiOiJkOTZiN2ExNTYwNGYwMmExYWNkMTVhNWJlY2JmMjQ4MCIsInN1YiI6IjY0ODNhYTBhOTkyNTljMDBlMmY0NWE4ZSIsInNjb3BlcyI6WyJhcGlfcmVhZCJdLCJ2ZXJzaW9uIjoxfQ._Sdbi-2PalUFAI7K7hzIv-hc4p92EU6q_yg6_IJJHjA';\n  const optionsWeek = {\n    method: 'GET',\n    url: 'https://api.themoviedb.org/3/trending/movie/week',\n    params: { language: 'en-US', page: currentPage },\n    headers: {\n      accept: 'application/json',\n      Authorization: `Bearer ${ACCESS_KEY}`,\n    },\n  };\n\n  try {\n    const response = await axios.request(optionsWeek);\n    return response.data;\n  } catch (error) {\n    console.error(error);\n    catalogFailure.style.display = 'block';\n  }\n}\n\nasync function fetchGenresMovie() {\n  try {\n    const response = await axios.request(optionsGenre);\n    return response.data.genres;\n  } catch (error) {\n    console.log(error);\n  }\n}\n\n// function getTargetMovieContainer() {\n//   const targetMovieContainer = document.querySelector('.movies-container');\n//   targetMovieContainer.addEventListener('click', handleMovieContainer);\n// }\n\n// function handleMovieContainer(event) {\n//   const targetMovieCardID = event.target.closest('.movie-card').dataset.id;\n//   alert(`Open Modal window by ID ${targetMovieCardID}`);\n// }\n"],"names":["parcelRequire","$bpxeT","$269debb668f361b9$export$291a2a9bb1cdfe3d","document","querySelector","$269debb668f361b9$export$112dc3a80752c131","$269debb668f361b9$var$_responseWeeklytrends","$parcel$interopDefault","$2TvXO","mark","_callee","data","moviesArr","genres","$269debb668f361b9$var$fetchWeeklytrends","_ctx","sent","results","$269debb668f361b9$var$fetchGenresMovie","forEach","e","genre1","find","genre","id","genre_ids","genre_name","name","innerHTML","$F0m9M","galleryMarkup","apply","this","arguments","currentPage1","$269debb668f361b9$var$_fetchWeeklytrends","optionsWeek","response","method","url","params","language","page","headers","accept","Authorization","concat","$dIxxU","default","request","console","error","t0","style","display","$269debb668f361b9$var$_fetchGenresMovie","$944jd","optionsGenre","log","$269debb668f361b9$var$responseWeeklytrends","$d5bf010ccfb26475$var$formEl","$d5bf010ccfb26475$var$inputEl","$d5bf010ccfb26475$var$resetContainer","$d5bf010ccfb26475$var$resetSearch","$d5bf010ccfb26475$var$_responseOptionsSearch","$d5bf010ccfb26475$var$fetchOptionsSearch","$d5bf010ccfb26475$var$fetchGenresMovie","length","$d5bf010ccfb26475$var$_fetchOptionsSearch","optionsSearch","$d5bf010ccfb26475$var$_fetchGenresMovie","addEventListener","event","preventDefault","$d5bf010ccfb26475$var$clearMarkup","value","trim","focus","query","$d5bf010ccfb26475$var$responseOptionsSearch","location","reload"],"version":3,"file":"catalog.c11fb80a.js.map"}