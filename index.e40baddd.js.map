{"mappings":"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","sources":["src/index.js","src/js/pages/home/monthly_trends.js","src/js/pages/home/weekly_trends.js"],"sourcesContent":["import './js/pages/header';\nimport './js/pages/hero';\nimport './js/pages/home/monthly_trends';\nimport './js/pages/home/weekly_trends';\nimport './js/galleryMarkup';\nimport './js/request';\nimport './js/components/modal';\nimport './js/pages/footer';\nimport './js/components/scrollUp';\nimport './js/components/loader';\nimport './js/components/team';","import axios from 'axios';\nimport { optionsUpcoming } from '../../request';\nimport { optionsGenre } from '../../request';\nimport { toggleLoader } from '../../components/loader';\nimport {\n  removeFromLocalStorage,\n  addToLocalStorage,\n  moviesIdList,\n  MOVIES_LIST_KEY,\n} from '../../components/localStorageBtn';\n\nconst containerMovie = document.querySelector('.container-upcoming-movie');\n\nasync function responseUpcoming() {\n  try {\n    toggleLoader(true);\n\n    const movieInfo = (await fetchUpcomingMovie()).results;\n    const randomFilm = createRandomMovies(movieInfo);\n    const genres = await fetchGenresMovie(randomFilm.id);\n\n    if (genres.length === 0) {\n      containerMovie.innerHTML = createMarkupUpcoming(randomFilm, []);\n    } else {\n      generateGenres(movieInfo, genres);\n      containerMovie.innerHTML = createMarkupUpcoming(randomFilm, genres);\n    }\n    const idFind = moviesIdList.find(e => e.id === randomFilm.id);\n    const addToLibraryBtn = document.querySelector('.upcoming-btn-add');\n    const removeFromLibraryBtn = document.querySelector('.upcoming-btn-remove');\n\n    if (idFind) {\n      addToLibraryBtn.style.display = 'none';\n      removeFromLibraryBtn.style.display = 'block';\n    } else {\n      removeFromLibraryBtn.style.display = 'none';\n      addToLibraryBtn.style.display = 'block';\n    }\n\n    containerMovie.addEventListener('click', onClickAddToLocalStorage);\n\n    function onClickAddToLocalStorage(event) {\n      event.preventDefault();\n      let randomFilmToLibrary = [];\n      randomFilmToLibrary.push(randomFilm);\n\n      randomFilmToLibrary.forEach(e => {\n        const genre = genres.find(genre => genre.id == e.genre_ids[0]);\n        return (e.genre_name = genre ? genre.name : '');\n      });\n\n      const target = event.target;\n      if (target.classList.contains('upcoming-btn-add-span')) {\n        addToLocalStorage(event, randomFilmToLibrary);\n      } else if (target.classList.contains('upcoming-btn-remove-span')) {\n        removeFromLocalStorage(event, randomFilmToLibrary);\n      }\n    }\n    //local\n  } catch (error) {\n    console.log(error);\n    markupError();\n  } finally {\n    toggleLoader(false);\n  }\n}\n\nasync function fetchUpcomingMovie() {\n  try {\n    toggleLoader(true);\n    return (await axios.request(optionsUpcoming)).data;\n  } catch (error) {\n    console.error(error);\n    containerMovie.innerHTML = markupError();\n  } finally {\n    toggleLoader(false);\n  }\n}\nasync function fetchGenresMovie(id) {\n  try {\n    const genres = await axios.request(optionsGenre);\n    return genres.data.genres;\n  } catch (error) {\n    console.log(error);\n    return [];\n  }\n}\n\nfunction createRandomMovies(movieInfo) {\n  const currentDate = new Date();\n  const year = currentDate.getFullYear();\n  const month = String(currentDate.getMonth() + 1).padStart(2, '0');\n  const startOfMonth = `${year}-${month}-01`;\n  const endOfMonth = `${year}-${month}-31`;\n\n  const filteredMovies = movieInfo.filter(\n    movie =>\n      movie.release_date >= startOfMonth && movie.release_date <= endOfMonth\n  );\n  const randomMovieFilm =\n    filteredMovies[Math.floor(Math.random() * filteredMovies.length)];\n\n  return randomMovieFilm;\n}\n\nfunction generateGenres(movieInfo, genres) {\n  return movieInfo.map(movie => {\n    const genreNames = movie.genre_ids.map(genreId => {\n      const genre = genres.find(genre => genre.id === genreId);\n      return genre ? genre.name : '';\n    });\n    return genreNames.join(', ');\n  });\n}\n\nfunction generateReleaseDate(date) {\n  const releaseDay = addLeadingZero(new Date(date).getDate());\n  const releaseMonth = addLeadingZero(new Date(date).getMonth() + 1);\n  const releaseYear = new Date(date).getFullYear();\n  return `${releaseDay}.${releaseMonth}.${releaseYear}`;\n}\n\nfunction createMarkupUpcoming(movieInfo, genres) {\n  const {\n    id: idMovie,\n    backdrop_path,\n    poster_path,\n    original_title,\n    release_date,\n    vote_average,\n    vote_count,\n    popularity,\n    genre_ids,\n    overview,\n  } = movieInfo;\n\n  const releaseDate = generateReleaseDate(release_date);\n\n  let poster = null;\n  const screenWidth = window.innerWidth;\n  if (screenWidth <= 767 && poster_path) {\n    poster = `https://image.tmdb.org/t/p/original/${poster_path}`;\n  } else if (backdrop_path) {\n    poster = `https://image.tmdb.org/t/p/original/${backdrop_path}`;\n  } else {\n    poster = `https://astoriamuseums.org/wp-content/uploads/2020/10/OFM-poster-not-available.png`;\n  }\n\n  const roundedPopularity = popularity.toFixed(1);\n\n  const genreNames = genre_ids.map(genreId => {\n    const genre = genres.find(genre => genre.id === genreId);\n    return genre ? genre.name : '';\n  });\n\n  return `\n    <img width=\"280\" height=\"402\" class=\"upcoming-image\" loading=\"lazy\" src=\"${poster}\" alt=\"${original_title}\">\n    <div class=\"info-container\" >\n    <h3 class=\"upcoming-movie-title\">${original_title}</h3>\n    <ul class=\"upcoming-list-details list\">\n      <li class=\"upcoming-list-details-item\">\n        <p class=\"upcoming-list-details-subtitle\">Release date</p>\n        <p class=\"upcoming-realese-date\">${releaseDate}</p>\n      </li>\n      <li class=\"upcoming-list-details-item\">\n        <p class=\"upcoming-list-details-subtitle\">Vote / Votes</p>\n        <p class=\"upcoming-votes\"><span>${vote_average}</span> / <span>${vote_count}</span></p>\n      </li>\n      <li class=\"upcoming-list-details-item\">\n        <p class=\"upcoming-list-details-subtitle\">Popularity</p>\n        <p class=\"upcoming-popularity\">${roundedPopularity}</p>\n      </li>\n      <li class=\"upcoming-list-details-item\">\n        <p class=\"upcoming-list-details-subtitle\">Genre</p>\n        <p class=\"genre\">${genreNames.join(', ')}</p>\n      </li>\n    </ul>\n    <h4 class=\"upcoming-about\">ABOUT</h4>\n    <p class=\"upcoming-about-text\">${overview}</p>\n    <button class=\"btn upcoming-btn-add btn-accent\" data-id=\"${idMovie}\" type=\"button\">\n    <span class=\"btn-in upcoming-btn-add-span\" >Add to my library</span></button>\n    <button class=\"btn upcoming-btn-remove btn-dark\" data-id=\"${idMovie}\" hidden  type=\"button\">\n    <span class=\"btn-in upcoming-btn-remove-span\"  >Remove from my library</span></button>\n    </div>\n  `;\n}\n\nfunction markupError() {\n  console.log('hello');\n  return `      \n<h2 class=\"upcoming-error\">\nOOPS...<br>\nWe are very sorry!<br>\nSomething went wrong.</h2>`;\n}\n\nfunction addLeadingZero(value) {\n  return String(value).padStart(2, '0');\n}\n\nresponseUpcoming();\n","import axios from 'axios';\nimport { galleryMarkup } from '../../galleryMarkup';\nimport { optionsGenre, optionsWeek } from '../../request';\n\nconst CARD_BLOCK = document.querySelector('.movies-container');\nconst getResponce = async () => {\n  try {\n    const res = axios.request(optionsWeek);\n    return res.then(res => {\n      if (window.screen.width <= 768) {\n        createMarkup(res.data.results.slice(0, 1));\n        getGenres(res.data.results.slice(0, 1));\n      } else {\n        createMarkup(res.data.results.slice(0, 3));\n        // generateGenres(res.data.results.slice(0, 1), getGenres);\n      }\n    });\n  } catch (error) {\n    console.log(error);\n  }\n};\ngetResponce();\nasync function createMarkup(data) {\n  const genres = await fetchGenresMovie();\n  data.forEach(e => {\n    const genre = genres.find(genre => genre.id == e.genre_ids[0]);\n    e.genre_name = genre ? genre.name : '';\n  });\n  CARD_BLOCK.innerHTML = galleryMarkup(data);\n}\n\nasync function fetchGenresMovie() {\n  try {\n    const response = await axios.request(optionsGenre);\n    return response.data.genres;\n  } catch (error) {\n    console.log(error);\n  }\n}\n"],"names":["parcelRequire","$2shzp","$db4dcec9f7e39aa5$var$containerMovie","document","querySelector","$db4dcec9f7e39aa5$var$createMarkupUpcoming","movieInfo","genres","id","idMovie","backdrop_path","poster_path","original_title","release_date","vote_average","vote_count","popularity","genre_ids","overview","releaseDate","date","$db4dcec9f7e39aa5$var$addLeadingZero","Date","getDate","getMonth","getFullYear","poster","window","innerWidth","toFixed","map","genreId","genre3","find","genre","name","join","$db4dcec9f7e39aa5$var$markupError","console","log","value","String","padStart","async","$adAgQ","toggleLoader","default","request","$e5MbR","optionsUpcoming","data","error","innerHTML","$db4dcec9f7e39aa5$var$fetchUpcomingMovie","results","randomFilm","currentDate","year","month","startOfMonth","endOfMonth","filteredMovies","filter","movie","Math","floor","random","length","$db4dcec9f7e39aa5$var$createRandomMovies","optionsGenre","$db4dcec9f7e39aa5$var$fetchGenresMovie","genre2","$db4dcec9f7e39aa5$var$generateGenres","idFind","$3l4pm","moviesIdList","e","addToLibraryBtn","removeFromLibraryBtn","style","display","addEventListener","event","preventDefault","randomFilmToLibrary","push","forEach","genre1","genre_name","target","classList","contains","addToLocalStorage","removeFromLocalStorage","$db4dcec9f7e39aa5$var$responseUpcoming","$f3f8ccbc0519c503$var$CARD_BLOCK","$f3f8ccbc0519c503$var$createMarkup","$f3f8ccbc0519c503$var$fetchGenresMovie","$isemc","galleryMarkup","optionsWeek","then","res","screen","width","slice","getGenres","$f3f8ccbc0519c503$var$getResponce"],"version":3,"file":"index.e40baddd.js.map"}