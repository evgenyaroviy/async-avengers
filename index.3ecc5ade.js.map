{"mappings":"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","sources":["src/index.js","src/js/pages/home/monthly_trends.js","src/js/components/loader.js","src/js/pages/home/weekly_trends.js"],"sourcesContent":["import './js/pages/header';\nimport './js/pages/hero';\nimport './js/pages/home/monthly_trends';\nimport './js/pages/home/weekly_trends';\nimport './js/galleryMarkup';\nimport './js/request';\nimport './js/components/modal';\nimport './js/pages/footer';\nimport './js/components/scrollUp';\nimport './js/components/loader';","import axios from 'axios';\nimport { optionsUpcoming } from '../../request';\nimport { optionsGenre } from '../../request';\nimport { showLoader, hideLoader } from '../../components/loader';\n\nconst containerMovie = document.querySelector('.container-upcoming-movie');\n\nasync function fetchUpcomingMovie() {\n  try {\n    showLoader();\n    const response = await axios.request(optionsUpcoming);\n    return response.data;\n  } catch (error) {\n    console.error(error);\n    containerMovie.innerHTML = markupError();\n  } finally {\n    hideLoader();\n  }\n}\nasync function fetchGenresMovie(id) {\n  try {\n    const genres = await axios.request(optionsGenre);\n    return genres.data.genres;\n  } catch (error) {\n    console.log(error);\n    return [];\n  }\n}\n\nasync function responseUpcoming() {\n  try {\n    showLoader();\n    const data = await fetchUpcomingMovie();\n    const movieInfo = data.results;\n    const randomIndex = Math.floor(Math.random() * movieInfo.length);\n    const randomMovie = movieInfo[randomIndex];\n    const id = randomMovie.id;\n    const genres = await fetchGenresMovie(id);\n\n    if (genres.length === 0) {\n      containerMovie.innerHTML = createMarkupUpcoming(movieInfo, []);\n    } else {\n      generateGenres(movieInfo, genres);\n      containerMovie.innerHTML = createMarkupUpcoming(movieInfo, genres);\n    }\n  } finally {\n    hideLoader();\n  }\n}\n\nfunction generateGenres(movieInfo, genres) {\n  const genresName = [];\n  movieInfo.forEach(movie => {\n    const genreNames = [];\n    movie.genre_ids.forEach(genreId => {\n      const genre = genres.find(genre => genre.id === genreId);\n      if (genre) {\n        genreNames.push(genre.name);\n      }\n    });\n    genresName.push(genreNames.join(', '));\n  });\n}\n\nfunction createMarkupUpcoming(movieInfo, genres) {\n  const currentDate = new Date();\n  const year = currentDate.getFullYear();\n  const month = String(currentDate.getMonth() + 1).padStart(2, '0');\n  const thisMonth = `${year}-${month}-01`;\n\n  const filteredMovies = movieInfo.filter(\n    movie => movie.release_date >= thisMonth\n  );\n  const randomIndex = Math.floor(Math.random() * filteredMovies.length);\n  const randomMovie = filteredMovies[randomIndex];\n  const {\n    id: idMovie,\n    backdrop_path,\n    poster_path,\n    original_title,\n    release_date,\n    vote_average,\n    vote_count,\n    popularity,\n    genre_ids,\n    overview,\n  } = randomMovie;\n\n  const releaseDay = addLeadingZero(new Date(release_date).getDate());\n  const releaseMonth = addLeadingZero(new Date(release_date).getMonth() + 1);\n  const releaseYear = new Date(release_date).getFullYear();\n\n  let poster = null;\n\n  const screenWidth = window.innerWidth;\n\n  if (screenWidth <= 767 && poster_path) {\n    poster = `https://image.tmdb.org/t/p/original/${poster_path}`;\n  } else if (backdrop_path) {\n    poster = `https://image.tmdb.org/t/p/original/${backdrop_path}`;\n  } else {\n    poster = `https://astoriamuseums.org/wp-content/uploads/2020/10/OFM-poster-not-available.png`;\n  }\n\n  const roundedPopularity = popularity.toFixed(1);\n\n  const genreNames = genre_ids.map(genreId => {\n    const genre = genres.find(genre => genre.id === genreId);\n    return genre ? genre.name : '';\n  });\n\n  return `\n    <img width=\"280\" height=\"402\" class=\"upcoming-image\"  src=\"${poster}\" alt=\"${original_title}\">\n    <div class=\"info-container\" >\n    <h3 class=\"upcoming-movie-title\">${original_title}</h3>\n    <ul class=\"upcoming-list-details list\">\n      <li class=\"upcoming-list-details-item\">\n        <p class=\"upcoming-list-details-subtitle\">Release date</p>\n        <p class=\"upcoming-realese-date\">${releaseDay}.${releaseMonth}.${releaseYear}</p>\n      </li>\n      <li class=\"upcoming-list-details-item\">\n        <p class=\"upcoming-list-details-subtitle\">Vote / Votes</p>\n        <p class=\"upcoming-votes\"><span>${vote_average}</span> / <span>${vote_count}</span></p>\n      </li>\n      <li class=\"upcoming-list-details-item\">\n        <p class=\"upcoming-list-details-subtitle\">Popularity</p>\n        <p class=\"upcoming-popularity\">${roundedPopularity}</p>\n      </li>\n      <li class=\"upcoming-list-details-item\">\n        <p class=\"upcoming-list-details-subtitle\">Genre</p>\n        <p class=\"genre\">${genreNames.join(', ')}</p>\n      </li>\n    </ul>\n    <h4 class=\"upcoming-about\">ABOUT</h4>\n    <p class=\"upcoming-about-text\">${overview}</p>\n    <button class=\"btn upcoming-btn-add btn-accent\" data-id=\"${idMovie}\" type=\"button\">\n    <span class=\"btn-in upcoming-btn-add-span\" >Add to my library</span></button>\n    <button class=\"btn upcoming-btn-remove btn-dark\" data-id=\"${idMovie}\" hidden  type=\"button\">\n    <span class=\"btn-in upcoming-btn-remove-span\"  >Remove from my library</span></button>\n    </div>\n  `;\n}\n\n// ERROR//\n\nfunction markupError() {\n  console.log('hello');\n  return `      \n<h2 class=\"upcoming-error\">\nOOPS...<br>\nWe are very sorry!<br>\nSomething went wrong.</h2>`;\n}\n\nfunction addLeadingZero(value) {\n  return String(value).padStart(2, '0');\n}\n// BUTTON//\n\ncontainerMovie.addEventListener('click', onClickAddToLocalStorage);\n\nfunction onClickAddToLocalStorage(event) {\n  event.preventDefault();\n  const target = event.target;\n  if (target.classList.contains('upcoming-btn-add-span')) {\n    addToLocalStorage(event);\n  } else if (target.classList.contains('upcoming-btn-remove-span')) {\n    removeFromLocalStorage(event);\n  }\n}\n\nfunction addToLocalStorage(e) {\n  const addToLibraryBtn = e.target.parentNode;\n  addToLibraryBtn.style.display = 'none';\n  const removeFromLibraryBtn = addToLibraryBtn.nextElementSibling;\n  removeFromLibraryBtn.style.display = 'block';\n}\nfunction removeFromLocalStorage(e) {\n  const removeFromLibraryBtn = e.target.parentNode;\n  removeFromLibraryBtn.style.display = 'none';\n  const addToLibraryBtn = removeFromLibraryBtn.previousElementSibling;\n  addToLibraryBtn.style.display = 'block';\n}\nresponseUpcoming();\n","// Щоб дадати loader до своєї сторінки потрібно:\n// 1. Додати  <span class=\"loader\"></span> до свого HTML у потрібному місці (перед ДОМ)\n// 2. зробити імпорт у свій файл JS: import { showLoader, hideLoader } from '../../components/loader';\n// 3. Викликати  showLoader() в конструкції try перед асинхронним запитом \n// 4. Викликати hideLoader() в конструкції finally\n// Підглянути можна в monthly.trends.js\n\nconst loader = document.querySelector('.loader');\n\nfunction showLoader() {\n  loader.style.display = 'block';\n}\n\nfunction hideLoader() {\n  loader.style.display = 'none';\n}\nexport { showLoader, hideLoader}\n","import axios from 'axios';\n\nconst API_KEY = 'e80fd9fb75f14049ed52c4547080278b';\nconst CARD_BLOCK = document.querySelector('.weekly_content');\nconst getResponce = () => {\n  try {\n    const res = axios.get(\n      `https://api.themoviedb.org/3/trending/movie/week?language=en-US&api_key=${API_KEY}`\n    );\n    return res.then(res => createMarkup(res.data.results.slice(0, 1)));\n  } catch (error) {\n    console.log('error' + error);\n  }\n};\nconsole.log(getResponce());\nfunction createMarkup(data) {\n  let card = data\n    .map(item => {\n      return `<div class=\"card\">\n    <img class=\"test_img\" src=\"https://image.tmdb.org/t/p/w500${\n      item.poster_path\n    }\" alt=\"${item.title}\">\n    <div class=\"card_titles\">\n    <p class=\"card_sup_title\">${item.title}</p>\n    <p class=\"card_sub_title\">${item.release_date.slice(0, 4)}</p>\n  </div>\n    </div>`;\n    })\n    .join('');\n  CARD_BLOCK.insertAdjacentHTML('beforeend', card);\n}\n"],"names":["parcelRequire","$bpxeT","$db576fa6837b6c10$var$loader","document","querySelector","$db576fa6837b6c10$export$56525cbb1fcd885c","style","display","$db576fa6837b6c10$export$5cee2c2772922923","$080adeebae6155d9$var$containerMovie","$080adeebae6155d9$var$fetchUpcomingMovie","$080adeebae6155d9$var$_fetchUpcomingMovie","apply","this","arguments","$parcel$interopDefault","$2TvXO","mark","_callee","response","$dIxxU","default","request","$944jd","optionsUpcoming","_ctx","sent","data","console","error","t0","innerHTML","$080adeebae6155d9$var$markupError","$080adeebae6155d9$var$fetchGenresMovie","id","$080adeebae6155d9$var$_fetchGenresMovie","genres","optionsGenre","log","$080adeebae6155d9$var$_responseUpcoming","movieInfo","randomIndex","randomMovie","results","Math","floor","random","length","$080adeebae6155d9$var$createMarkupUpcoming","$080adeebae6155d9$var$generateGenres","genresName","forEach","movie","genreNames","genre_ids","genreId","genre1","find","genre","push","name","join","currentDate","Date","year","getFullYear","month","String","getMonth","padStart","thisMonth","concat","filteredMovies","filter","release_date","idMovie","backdrop_path","poster_path","original_title","vote_average","vote_count","popularity","overview","releaseDay","$080adeebae6155d9$var$addLeadingZero","getDate","releaseMonth","releaseYear","poster","window","innerWidth","roundedPopularity","toFixed","map","genre2","value","addEventListener","event","preventDefault","target","classList","contains","e","addToLibraryBtn","parentNode","nextElementSibling","removeFromLibraryBtn","previousElementSibling","$080adeebae6155d9$var$removeFromLocalStorage","$080adeebae6155d9$var$responseUpcoming","$c1e4efc7cdd51bb4$var$CARD_BLOCK","get","then","res","slice","card","item","title","insertAdjacentHTML","$c1e4efc7cdd51bb4$var$getResponce"],"version":3,"file":"index.3ecc5ade.js.map"}